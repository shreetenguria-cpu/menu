<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">

<div class="sticky top-0 bg-white shadow p-3 space-y-2">
  <div class="flex justify-between items-center">
    <div class="text-xl font-bold">Shreeji Cafe</div>
    <button id="langBtn" class="px-3 py-1 bg-green-500 text-white rounded">à¤¹à¤¿à¤‚à¤¦à¥€</button>
  </div>
  <input id="search" placeholder="Search..." class="w-full p-2 border rounded" oninput="search()">
</div>

<div id="categories" class="flex overflow-x-auto p-2 gap-2"></div>
<div id="menu" class="grid grid-cols-2 gap-3 p-3"></div>

<script>
const API = "https://script.google.com/macros/s/AKfycbxCBbWRBXfeZUZk4_jJe12aBZZYn0PueDq2b_3EnZ6AqIh_vnZhuxVZcb-t3X_2rDk2Ew/exec";
const WHATSAPP = "918512034223"; // your number
let lang="en", all=[], filtered=[];

fetch(API).then(r=>r.json()).then(d=>{
  all=d; filtered=d;
  buildCats(d); render(d);
});

function buildCats(data){
  const cats=[...new Set(data.map(i=>i.category))];
  const box=document.getElementById("categories");
  box.innerHTML="";
  ["All","Combos",...cats].forEach(c=>{
    const b=document.createElement("button");
    b.innerText=c;
    b.className="px-4 py-2 bg-green-100 rounded-full whitespace-nowrap";
    b.onclick=()=>{
      filtered = c==="All"?all : c==="Combos"?all.filter(i=>i.combo):all.filter(i=>i.category===c);
      render(filtered);
    };
    box.appendChild(b);
  });
}

function search(){
  const q=document.getElementById("search").value.toLowerCase();
  render(filtered.filter(i=>
    i.name_en.toLowerCase().includes(q) || i.name_hi.toLowerCase().includes(q)
  ));
}

function spiceIcons(n){
  return "ðŸŒ¶".repeat(n);
}

function render(items){
  const m=document.getElementById("menu");
  m.innerHTML="";
  items.forEach(i=>{
    const name = lang==="en" ? (i.name_en || "Item") : (i.name_hi || "Item");
    const price = i.price || 0;
    const img = i.image || "";
    const msg = encodeURIComponent(`Order: ${name} - â‚¹${price}`);

    m.innerHTML+=`
      <div class="bg-white rounded-xl shadow p-2">
        ${img ? `<img src="${img}" class="rounded-lg h-32 w-full object-cover">` : ""}
        <div class="font-semibold mt-1">${name}</div>
        <div class="text-sm">${"ðŸŒ¶".repeat(i.spice||0)} ${i.calories?`ðŸ”¥ ${i.calories} cal`:``}</div>
        <div class="flex justify-between items-center mt-1">
          <div class="text-green-600 font-bold">â‚¹${price}</div>
          <a href="https://wa.me/91XXXXXXXXXX?text=${msg}" target="_blank"
             class="bg-green-500 text-white px-2 py-1 rounded text-sm">Order</a>
        </div>
      </div>
    `;
  });
}


document.getElementById("langBtn").onclick=()=>{
  lang = lang==="en"?"hi":"en";
  document.getElementById("langBtn").innerText = lang==="en"?"à¤¹à¤¿à¤‚à¤¦à¥€":"English";
  render(filtered);
};
</script>

</body>
</html>

